(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2613)}])},2613:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h}});var s=n(5893);n(1535);var a=n(7294),c=n(4924),i=n(196);class o{static async create(t,e){return i.ZP.post(this.url,{name:t,phone:e})}static async get(t){return i.ZP.get(this.url+"/"+t)}static async all(){return i.ZP.get(this.url)}static async update(t,e,n){return i.ZP.put(this.url+"/"+t,{name:e,phone:n})}static async delete(t){return i.ZP.delete(this.url+"/"+t)}}(0,c.Z)(o,"url","http://127.0.0.1:3000/contacts");class l extends a.Component{componentDidMount(){this.loadContacts()}handleChangeContact_id(t){this.setState({contact_id:t.target.value})}handleChangeContact_name(t){this.setState({contact_name:t.target.value})}handleContact_phone(t){this.setState({contact_phone:t.target.value})}saveContact(t){t.preventDefault(),null!=this.state.contact_id&&0!=this.state.contact_id.length?o.update(this.state.contact_id,this.state.contact_name,this.state.contact_phone).then(t=>{console.log(t.data)}).catch(function(t){console.log(JSON.stringify(t))}):o.create(this.state.contact_name,this.state.contact_phone).then(t=>{console.log(t.data)}).catch(function(t){console.log(JSON.stringify(t))}),this.loadContacts()}loadContacts(){o.all().then(t=>{console.log(t.data),this.setState({items:t.data})}).catch(function(t){console.log(JSON.stringify(t))}),this.forceUpdate()}editContact(t,e){o.get(t).then(t=>{console.log(t.data),this.setState({contact_id:t.data.id}),this.setState({contact_name:t.data.name}),this.setState({contact_phone:t.data.phone})}).catch(function(t){console.log(JSON.stringify(t))})}deleteContact(t,e){o.delete(t).then(t=>{console.log(t.data)}).catch(function(t){console.log(JSON.stringify(t))}),this.loadContacts()}render(){let t=[];return this.state.items.forEach(e=>{t.push((0,s.jsxs)("tr",{class:"w-100",children:[(0,s.jsx)("th",{scope:"row",style:{"min-width":"50px"},children:e.id}),(0,s.jsx)("td",{style:{width:"100%"},children:e.name}),(0,s.jsx)("td",{style:{"min-width":"150px"},children:e.phone}),(0,s.jsxs)("td",{style:{"min-width":"170px"},children:[(0,s.jsx)("button",{type:"submit",class:"btn btn-primary me-2",onClick:t=>this.editContact(e.id,t),children:"Editar"}),(0,s.jsx)("button",{type:"submit",class:"btn btn-danger ms-2",onClick:t=>this.deleteContact(e.id,t),children:"Excluir"})]})]}))}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{class:"h-100- w-100 d-flex flex-wrap justify-content-start align-items-center bg-dark",style:{height:"100vh"},children:(0,s.jsxs)("div",{class:"d-flex flex-wrap align-self-center col-md-6 mx-auto px-4 pb-3 pt-2 bg-light text-secondary",children:[(0,s.jsx)("h1",{children:"Agenda telef\xf4nica"}),(0,s.jsxs)("form",{class:"w-100",onSubmit:this.saveContact,children:[(0,s.jsxs)("div",{class:"form-group w-100",children:[(0,s.jsx)("label",{for:"exampleInputnome1",children:"Nome"}),(0,s.jsx)("input",{type:"text",class:"form-control",placeholder:"Digite o nome do contato",value:this.state.contact_name,onChange:this.handleChangeContact_name}),(0,s.jsx)("small",{id:"nameHelp",class:"form-text text-muted px-3",children:"O nome deve conter mais de 4 caracteres"})]}),(0,s.jsxs)("div",{class:"form-group w-100 pt-1",children:[(0,s.jsx)("label",{for:"exampleInputnome1",children:"Telefone"}),(0,s.jsx)("input",{type:"text",class:"form-control",placeholder:"(__)_____-_____",mask:"(99)99999-9999",value:this.state.contact_phone,onChange:this.handleContact_phone}),(0,s.jsx)("small",{id:"phoneHelp",class:"form-text text-muted px-3",children:"O telefone \xe9 um campo obrigat\xf3rio"})]}),(0,s.jsx)("div",{class:"form-group w-100 pt-2",children:(0,s.jsx)("button",{type:"submit",class:"btn btn-success",children:"Salvar"})})]}),(0,s.jsx)("hr",{class:"w-100 "}),(0,s.jsxs)("table",{class:"table table-striped w-100 ",children:[(0,s.jsx)("thead",{class:"thead-dark w-100 d-flex",children:(0,s.jsxs)("tr",{class:"w-100 ",children:[(0,s.jsx)("th",{scope:"col",style:{"min-width":"50px"},children:"#"}),(0,s.jsx)("th",{scope:"col ",style:{width:"100%"},children:"Nome"}),(0,s.jsx)("th",{scope:"col",style:{"min-width":"150px"},children:"Telefone"}),(0,s.jsx)("th",{scope:"col",style:{"min-width":"170px"},children:"Ac\xf5es"})]})}),(0,s.jsx)("tbody",{class:"w-100 d-flex flex-wrap ",style:{"min-height":"250px",height:"200px","min-width":"100%","overflow-y":"scroll"},children:t})]})]})})})}constructor(){super(),this.state={contact_id:null,contact_name:"",contact_phone:"",items:[]},this.handleChangeContact_id=this.handleChangeContact_id.bind(this),this.handleChangeContact_name=this.handleChangeContact_name.bind(this),this.handleContact_phone=this.handleContact_phone.bind(this),this.saveContact=this.saveContact.bind(this),this.loadContacts=this.loadContacts.bind(this),this.editContact=this.editContact.bind(this)}}var h=function(){return(0,s.jsx)(l,{})}}},function(t){t.O(0,[774,652,648,888,179],function(){return t(t.s=5557)}),_N_E=t.O()}]);